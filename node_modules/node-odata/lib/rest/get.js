'use strict';

Object.defineProperty(exports, '__esModule', {
  value: true
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _parserCountParser = require('../parser/countParser');

var _parserCountParser2 = _interopRequireDefault(_parserCountParser);

var _parserFilterParser = require('../parser/filterParser');

var _parserFilterParser2 = _interopRequireDefault(_parserFilterParser);

var _parserOrderbyParser = require('../parser/orderbyParser');

var _parserOrderbyParser2 = _interopRequireDefault(_parserOrderbyParser);

var _parserSkipParser = require('../parser/skipParser');

var _parserSkipParser2 = _interopRequireDefault(_parserSkipParser);

var _parserTopParser = require('../parser/topParser');

var _parserTopParser2 = _interopRequireDefault(_parserTopParser);

var _parserSelectParser = require('../parser/selectParser');

var _parserSelectParser2 = _interopRequireDefault(_parserSelectParser);

exports['default'] = function (req, mongooseModel) {
  return new Promise(function (resolve, reject) {
    mongooseModel.findOne({ _id: req.params.id }, function (err, entity) {
      if (err) {
        return reject(err);
      }

      if (!entity) {
        return reject({ status: 404 }, { text: 'Not Found' });
      }

      return resolve({ entity: entity });
    });
  });
};

module.exports = exports['default'];