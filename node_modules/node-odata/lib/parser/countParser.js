'use strict';

Object.defineProperty(exports, '__esModule', {
  value: true
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _filterParser = require('./filterParser');

var _filterParser2 = _interopRequireDefault(_filterParser);

// ?$skip=10
// ->
// query.skip(10)

exports['default'] = function (resData, mongooseModel, $count, $filter) {
  if (!$count) {
    return;
  }

  if ($count === 'true') {
    var query = mongooseModel.find();
    (0, _filterParser2['default'])(query, $filter);
    query.count(function (err, count) {
      resData['@odata.count'] = count;
    });
  } else if ($count == 'false') {
    return;
  } else {
    return new Error('Unknown $count option, only "true" and "false" are supported.');
  }
};

module.exports = exports['default'];